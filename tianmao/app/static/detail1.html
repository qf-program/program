<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>详情页</title>
    <link rel="stylesheet" type="text/css" href="css/iconfont.css" />
    <link rel="stylesheet" type="text/css" href="css/detail.css" />
    <link rel="stylesheet" type="text/css" href="css/common.css">
</head>

<body>


    <div id="header-wrap">
        <div class="header container">
            <div class="login">
                <span class="wel">喵，欢迎来到天猫&nbsp;</span>
                <a href="#">请登录&nbsp;&nbsp;</a>
                <a href="#">免费注册</a>
            </div>
            <ul>
                <li><a href="shouye.html">我的淘宝<i class="iconfont icon-sanjiao1"></i></a></li>
                <li><a href="#"><span class="iconfont icon-gouwuche"></span>购物车<i class="iconfont icon-sanjiao1"></i></a></li>
                <li><a href="#" class="line">收藏夹<i class="iconfont icon-sanjiao1"></i></a>|</li>
                <li><a href="#"><span class="iconfont icon-shouji"></span>手机版<i class="iconfont icon-sanjiao1"></i></a></li>
                <li><a href="#">淘宝网<i class="iconfont icon-sanjiao1"></i></a></li>
                <li><a href="#">商家支持<i class="iconfont icon-sanjiao1"></i></a></li>
                <li><a href="#"><span class="iconfont icon-liebiao1"></span>网站导航<i class="iconfont icon-sanjiao1"></i></a></li>

            </ul>
        </div>
    </div>

    <div id="top-wrap">
        <div class="top container">
            <div class="logo">
                <h1><a href="#"></a></h1>
            </div>
            <div class="search">
                <form>
                    <input type="text" class="txt" placeholder="搜索  天猫  商品/ 品牌/ 店铺">
                    <input type="submit" class="sub" value="搜天猫">
                    <input type="submit" class="sub" value="搜本店" style="background: #333333; color: #ffffff">
                </form>
                <div class="resou">

                    <a href="#">耐克</a>
                    <a href="#">阿迪</a>
                    <a href="#">新品</a>
                    <a href="#">帆布鞋</a>
                    <a href="#">跑步鞋</a>
                    <a href="#">篮球鞋</a>
                    <a href="#">外套</a>

                </div>
            </div>
        </div>
    </div>

    <div id="nav-wrap">
        <div class="nav container">
            <a href="#"></a>
            <i class="iconfont icon-sousuo"></i> <input type="text" class="sousuo1" placeholder="搜你想要的">
        </div>

    </div>
    <div id="nav1-wrap">

    </div>

    <!-- 版心 -->

    <div id="banner-wrap">
        <div class="banner container">
            <div class="banner-l">
                <div class="box">
                    <div class="show-image">
                        <img src="images/img3.jpg" alt="" style="width: 420px; height: 420px; border: 1px solid #eee;">
                        <span class="filter"></span>
                    </div>
                    <div class="show-big-image">
                        <img src="images/img3.jpg" alt="" id="big-image">
                    </div>
                    <ul class="img-box">
                        <li><img src="images/img3.jpg" alt=""></li>
                        <li><img src="images/img2.jpg" alt=""></li>
                        <li><img src="images/img5.jpg" alt=""></li>
                        <li><img src="images/img4.jpg" alt=""></li>
                    </ul>
                    <p><span>分享</span>
                        <span><i class="iconfont icon-shoucangxuanzhong"></i>收藏商品&nbsp;（128593人气）</span>
                        <span>举报</span>
                    </p>
                </div>
                <div class="xinxi">
                    <h2>CONVERSE匡威官方 Chuck Taylor All Star '70 162063C</h2>
                    <h3>此款鞋尺码偏大 买偏小半码</h3>
                    <div class="price"></div>
                    <h4><span>运费</span> <b>江苏无锡&nbsp;至&nbsp;深圳<i class="iconfont icon-diquxialajiantou"></i>快递：10.00</b></h4>
                    <ul class="pingjia">
                        <li>累计评价<span>6312</span></li>丨
                        <li>送天猫积分<span>269</span></li>
                    </ul>
                    <ul class="title">
                        <li>鞋码</li>
                        <li>颜色分类</li>
                        <li>数量</li>
                    </ul>
                    <ul class="xiema">
                        <li>39</li>
                        <li>39.5</li>
                        <li>40</li>
                        <li>40.5</li>
                        <li>41</li>
                        <li>41.5</li>
                        <li>42</li>
                        <li>42.5</li>
                        <li>43</li>
                        <li>44</li>
                        <li>45</li>
                    </ul>
                    <div class="color">黄色/162063C</div>
                    <div class="count">
                        <input type="text" class="inp" value="1">
                        <button class="btn1"><i class="iconfont icon-sanjiao2"></i></button>
                        <button class="btn2"><i class="iconfont icon-sanjiao1"></i></button>
                    </div>
                    <button class="buy">立即购买</button>
                    <button class="car" id="btn"><i class="iconfont icon-gouwuche"></i> 加入购物车</button>
                    <p>服务承诺 <b>正品保证</b>
                        <b>极速退款</b>
                        <b>七天无理由退换</b>
                        <b>支付方式 <i class="iconfont icon-diquxialajiantou"></i></b>
                    </p>
                </div>
            </div>
            <div class="banner-r">
                <a href="#"></a>
            </div>
        </div>
    </div>
    <div id="quanyi-wrap">
        <div class="quanyi container">
            <h2 class="pinzhi"> <a href="#"></a></h2>
            <div class="quanyi-b">
                <dl>
                    <dt>购物指南</dt>
                    <dd>免费注册</dd>
                    <dd>开通支付宝</dd>
                    <dd>支付宝充值</dd>
                </dl>
                <dl>
                    <dt>天猫保障</dt>
                    <dd>发票保障</dd>
                    <dd>售后规则</dd>
                    <dd>缺货赔付</dd>
                </dl>
                <dl>
                    <dt>支付方式</dt>
                    <dd>快捷支付</dd>
                    <dd>余额宝</dd>
                    <dd>信用卡</dd>
                    <dd>蚂蚁花呗</dd>
                    <dd>货到付款</dd>
                </dl>
                <dl>
                    <dt>商家服务</dt>
                    <dd>天猫规则</dd>
                    <dd>商家入驻</dd>
                    <dd>商家中心</dd>
                    <dd>天猫智库</dd>
                    <dd>物流服务</dd>
                    <dd>喵言喵语</dd>
                    <dd>运营服务</dd>
                </dl>
                <div class="erweima">
                    <span>手机天猫</span>
                    <a href="#"></a>
                </div>
            </div>
        </div>
    </div>
    <!-- 尾部 -->
    <div id="footer-wrap">
        <div class="footer container">
            <div class="tianmao"></div>
            <ul class="footer1">
                <li><a href="#">关于天猫</a></li>
                <li><a href="#">帮助中心</a></li>
                <li><a href="#">开放平台</a></li>
                <li><a href="#">诚聘英才</a></li>
                <li><a href="#">联系我们</a></li>
                <li><a href="#">网站合作</a></li>
                <li><a href="#">法律声明</a></li>
                <li><a href="#">隐私权政策</a></li>
                <li><a href="#">知识产权</a></li>
                <li><a href="#">廉政举报</a></li>
            </ul>

            <ul class="footer2">
                <li><a href="#">阿里巴巴集团</a></li>
                <li><a href="#">淘宝网</a></li>
                <li><a href="#">天猫</a></li>
                <li><a href="#">聚划算</a></li>
                <li><a href="#">全球速卖通</a></li>
                <li><a href="#">阿里巴巴国际交易市场</a></li>
                <li><a href="#">1688</a></li>
                <li><a href="#">阿里妈妈</a></li>
                <li><a href="#">飞猪</a></li>
                <li><a href="#">阿里云计算</a></li>
                <li><a href="#">AliOS</a></li>
                <li><a href="#">阿里通信</a></li>
                <li><a href="#">万网</a></li>
                <li><a href="#">高德</a></li>
                <li><a href="#">UC</a></li>
                <li><a href="#">友盟</a></li>
                <li><a href="#">虾米</a></li>
                <li><a href="#">钉钉</a></li>
                <li><a href="#">支付宝</a></li>
            </ul>
            <ul class="footer3">
                <li><span>增值电信业务经营许可证：</span><a href="#">浙B2-20110446</a></li>
                <li><span>市场名称登记证：</span><i>工商网市字3301004119</i></li>
                <li><span>出版物网络交易平台服务经营备案证：</span><i>新出发浙备字第001号</i></li>
                <li><span>互联网违法和不良信息举报电话：</span><i>0571-81683755 blxxjb@alibaba-inc.com</i></li>
                <li><span>互联网药品信息服务资质证书编号：</span><i>浙-（经营性）-2017-0005</i></li>
                <li><span>出版物网络交易平台服务经营备案证：</span><i>新出发浙备字第001号</i></li>
                <li><span>医疗器械网络交易服务第三方平台备案：</span><i>（浙）网械平台备字[2018]第00002号</i></li>
                <li><span>互联网药品交易服务资格证书：</span><i>国A20150001</i></li>
                <li><span>浙江省网络食品销售第三方平台提供者备案：</span><i>浙网食A33010002</i></li>
                <li><a href="#">12318举报</a></li>
            </ul>
            <div class="banquan">
                <span>© 2003-2018 TMALL.COM 版权所有</span>
            </div>

        </div>
    </div>
    <!-- <script src="js/public.js"></script> -->
    <!-- <script src="js/jquery.js"></script> -->
    <script>
    
    var big = (function () {

  return {
    init() {
      // 获取最大的盒子
      this.$box = document.querySelector("#banner-wrap .banner .banner-l .box");

      // 获取展示图片的盒子
      this.$showImage = this.$box.querySelector('.show-image');
      // 获取放大图片的盒子
      this.$showBigImage = this.$box.querySelector('.show-big-image');
      // console.log(this.$showBigImage)
      // 获取小图片的盒子
      this.$ulbox = this.$box.querySelector('.img-box');
      // 获取每一张图片的li集合
      this.$liAll = this.$ulbox.children;
      // 获取移动的小黑块(放大镜)
      this.$filter = this.$showImage.querySelector('.filter');
      this.$banner = document.querySelector("#banner-wrap .banner");
      // this.$xiemaAll = $('.xiema').children;
      this.$xiema = document.querySelector('.xiema');
      this.$xiemaAll = document.querySelectorAll('.xiema li');
      this.$btn1 = document.querySelector('.btn1');
      // console.log(this.$btn1)
      this.$btn2 = document.querySelector('.btn2');
      this.$inp = document.querySelector('.inp');
      // console.log(this.$btn1, this.$inp, this.$btn2);
      // console.log(this.$xiemaAll[0]);
      // console.log(this.$xiemaAll.length);

      // 给每一li添加索引， 方便获取
      for (var i = 0; i < this.$liAll.length; i++) {
        this.$liAll[i].index = i;
      }

      this.event();

    },
    event: function () {
      var _this = this;
      var t = this.$inp.value || 1; // 给数量赋值
      // 利用事件委托，给每一个li添加点击事件
      this.$ulbox.onclick = function (ev) {
        ev = ev || window.event;
        var target = ev.target || ev.srcElement;
        // 点击时，真正触发的为图片。
        if (target.nodeName === 'IMG') {
          // 获取li的索引 =》target.parentNode.index
          // 点击触发更换图片
          _this.showImage(target.parentNode.index)
        }
      }
      //鞋码的点击事件
      this.$xiema.onclick = function (e) {
        // const _this = this;
        // console.log(_this.$xiemaAll.length);
        e = e || window.event;
        var target = e.target || e.srcElement;
        if (target.nodeName === 'LI') {
          // console.log(target);
          for (var i = 0; i < _this.$xiemaAll.length; i++) {
            _this.$xiemaAll[i].className = '';
          }
          target.className = 'active';

          // 商品数量的点击事件
        }

      }

      this.$btn1.onclick = function () {
        console.log(this.$btn1);
        console.log(1);
        t = _this.$inp.value || 1;
        ++t;
        _this.$inp.value = `${t}`;
      }
      // 商品数量的点击事件


      this.$btn2.onclick = function () {
        t = _this.$inp.value || 1;
        --t;
        if (t < 1) {
          t = 1;
        }
        _this.$inp.value = `${t}`;
      }
      // 这里用onmouseenter： 子元素不触发事件
      this.$showImage.onmouseenter = function () {
        // 放大镜显示
        _this.$filter.style.display = 'block';
        // 展示大图片显示
        _this.$showBigImage.style.display = 'block';
      }
      this.$showImage.onmouseleave = function () {

        _this.$filter.style.display = 'none';
        _this.$showBigImage.style.display = 'none';
      }
      this.$showImage.onmousemove = function (ev) {
        ev = ev || window.event;
        // 计算小方块定点坐标
        var x = ev.pageX - _this.$banner.offsetLeft - _this.$filter.offsetWidth / 2;
        var y = ev.pageY - _this.$banner.offsetTop - _this.$filter.offsetHeight / 2;

        // 获取小方块移动的最大坐标
        var maxL = 420 - _this.$filter.offsetWidth,
          maxT = 420 - _this.$filter.offsetHeight;
        // console.log(this);
        if (x >= maxL) {
          x = maxL
        } else if (x <= 0) {
          x = 0;
        }
        if (y >= maxT) {
          y = maxT;
        } else if (y <= 0) {
          y = 0;
        }
        _this.$filter.style.left = x + 'px';
        _this.$filter.style.top = y + 'px';

        // 移动大图片的位置， 放大三倍
        var img = _this.$showBigImage.querySelector('img');
        img.style.left = -1.4 * x + 'px';
        img.style.top = -1.4 * y + 'px';
      }
    },
    showImage: function (index) {
      // console.log(index);
      // for(var i = 0; i < this.$liAll.length; i++) {
      //   this.$liAll[i].className = ''
      // }
      // this.$liAll[index].className = 'active';
      // 修改对应的图片地址
      var src = this.$liAll[index].querySelector('img').getAttribute('src');
      this.$showImage.querySelector('img').src = src;
      this.$showBigImage.querySelector('img').src = src;
      console.log(src);
    }
  }
}())
big.init();
    
    </script>
</body>

</html>