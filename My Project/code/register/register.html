<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>用户注册</title>
    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="register.css">

</head>

<body>
    <div class="banner">
        <!-- <div class="guangao"></div> -->
        <div class="container">
            <div class="banner-list1">
                <a href="#"><img src="../images/banner.jpg" alt=""></a>
                <a href="#"><img src="../images/logo.png" alt=""></a>
            </div>
            <div class="kua">
                <h3>账号注册</h3>
                <div class="layot">
                    <form action="register.php" id="form" method="post">
                        <p><input type="text" name="uname" id="uname" placeholder="用户名"><span id="checkUname"></span></p>
                        <p><input type="password" name="upwd" id="upwd" placeholder="密码"><span id="checkUpwd"></span></p>
                        <div class="sub"><input type="submit" value="注册"></div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="footer">
        <p><a href="#"><img src="../images/a.png" alt="">&nbsp;在线客服</a><a href="#"><img src="../images/tel.png" alt="">&nbsp;400-678-9688(24小时全国服务热线)</a></p>
        <p>COPYRIGHT © 1996-2017 ALL RIGHTS RESERVED.粤ICP备05100288号</p>
    </div>

</body>

</html>
<script src="../js/jquery.min.js"></script>
<script type="text/javascript">
    var checkUname = $("#checkUname");
    var checkUpwd = $("#checkUpwd");
    var uname = $("#uname");
    var upwd = $("#upwd");
    var form = $("#form");
    //控制表示是否提交；
    var flag = false; //false验证未通过

    var unameReg = /^1[34578]\d{9}$/;
    uname.focus(function () {
        checkUname.html("请输入手机号码").css("color", "red");
    });

    uname.blur(function () {
        if (unameReg.test(this.value)) {
            $.ajax({
                url: "onlyCheckUname.php",
                type: "get",
                data: {
                    uname: this.value
                },
                success: function (res) {
                    if (res == 1) {
                        flag = false;
                        checkUname.html("✘手机号已存在，请重新输入").css("color", "red");
                    } else {
                        flag = true;
                        checkUname.html("✔可用").css("color", "red");
                    }
                }
            })
            flag = true;
        } else {
            checkUname.html("输入不合法，请重新输入!").css("color", "red");
            flag = false;
        }
    })

    var upwdReg = /^\w{6,20}$/;
    upwd.focus(function () {
        checkUpwd.html("请输入密码").css("color", "red");
    });

    upwd.blur(function () {
        var upwdVal = this.value;
        if (upwdVal == "") {
            checkUpwd.html("密码不能为空").css("color", "red");
            flag = false;
        } else if (upwdReg.test(upwdVal)) {
            checkUpwd.html("✔密码正确").css("color", "red");
            return true;
        } else {
            checkUpwd.html("输入不合法，请重新输入!").css("color", "red");
            flag = false;
        }
    })

    form.submit(function () {
        if (flag) {
            return true;
        } else {
            return false;
        }
    });
</script>