"use strict";function _classCallCheck(i,s){if(!(i instanceof s))throw new TypeError("Cannot call a class as a function")}function _defineProperties(i,s){for(var n=0;n<s.length;n++){var a=s[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,a.key,a)}}function _createClass(i,s,n){return s&&_defineProperties(i.prototype,s),n&&_defineProperties(i,n),i}jQuery.getUrlParam=function(i){var s=new RegExp("(^|&)"+i+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(s);return null!=n?unescape(n[2]):null},$(function(){var i={banners:$(".banner-l"),bid:$.getUrlParam("bid"),cartShopsNum:$("#cartShopsNum")};new showDetailsInfo(i)});var showDetailsInfo=function(){function s(i){_classCallCheck(this,s),this.banners=i.banners,this.bid=i.bid,this.cartShopsNum=i.cartShopsNum,this.getDetailsphones()}return _createClass(s,[{key:"getDetailsphones",value:function(){var s=this;$.getJSON("json/tianmao.json",function(i){s.showDetailsInfo(i),s.addCart()})}},{key:"showDetailsInfo",value:function(s){for(var n=this.bid,i="",a=0;a<s.length;a++)s[a].bid==this.bid&&(i+='\n        <i style="display:none" class="bid">'.concat(s[a].bid,'</i>\n        <div class="box">\n        <div class="show-image">\n            <img src="images/').concat(s[a].src,'" alt="" style="width: 420px; height: 420px; border: 1px solid #eee;">\n            <span class="filter"></span>\n        </div>\n        <div class="show-big-image">\n            <img src="images/').concat(s[a].src,'" alt="" id="big-image">\n        </div>\n        <ul class="img-box">\n            <li><img src="images/').concat(s[a].src,'" alt=""></li>\n            <li><img src="images/').concat(s[a].src1,'" alt=""></li>\n            <li><img src="images/').concat(s[a].src2,'" alt=""></li>\n            <li><img src="images/').concat(s[a].src3,'" alt=""></li>\n        </ul>\n        <p><span>分享</span>\n            <span><i class="iconfont icon-shoucangxuanzhong"></i>收藏商品&nbsp;（128593人气）</span>\n            <span>举报</span>\n        </p>\n       </div>\n\n       <div class="xinxi">\n          <h2>CONVERSE匡威官方 Chuck Taylor All Star \'70 162063C</h2>\n          <h3>此款鞋尺码偏大 买偏小半码</h3>\n          <div class="price"></div>\n          <h4><span>运费</span> <b>江苏无锡&nbsp;至&nbsp;深圳<i class="iconfont icon-diquxialajiantou"></i>快递：10.00</b></h4>\n          <ul class="pingjia">\n              <li>累计评价<span>6312</span></li>丨\n              <li>送天猫积分<span>269</span></li>\n          </ul>\n          <ul class="title">\n              <li>鞋码</li>\n              <li>颜色分类</li>\n              <li>数量</li>\n          </ul>\n          <ul class="xiema">\n              <li>39</li>\n              <li>39.5</li>\n              <li>40</li>\n              <li>40.5</li>\n              <li>41</li>\n              <li>41.5</li>\n              <li>42</li>\n              <li>42.5</li>\n              <li>43</li>\n              <li>44</li>\n              <li>45</li>\n          </ul>\n          <div class="color">黄色/162063C</div>\n          <div class="count">\n              <input type="text" class="inp" value="1">\n              <button class="btn1"><i class="iconfont icon-sanjiao2"></i></button>\n              <button class="btn2"><i class="iconfont icon-sanjiao1"></i></button>\n          </div>\n          <button class="buy">立即购买</button>\n          <button class="car"><i class="iconfont icon-gouwuche"></i> 加入购物车</button>\n          <p>服务承诺 <b>正品保证</b>\n              <b>极速退款</b>\n              <b>七天无理由退换</b>\n              <b>支付方式 <i class="iconfont icon-diquxialajiantou"></i></b>\n          </p>\n      </div>\n       '));$(".banner-l").html(i);var t=0,e=new Array,l=new Array;$(".banner-l .box .img-box li").click(function(){t=$(this).index();for(var i=0;i<s.length;i++)l.push(s[i].src,s[i].src1,s[i].src2,s[i].src3),e.push(l.splice(0,4));$(".banner-l .box .img-box li").eq(t).addClass("active").siblings().removeClass("active"),101==n?$(".show-image img").attr("src","images/"+e[0][t]):102==n?$(".show-image img").attr("src","images/"+e[1][t]):103==n?$(".show-image img").attr("src","images/"+e[2][t]):104==n?$(".show-image img").attr("src","images/"+e[3][t]):105==n?$(".show-image img").attr("src","images/"+e[4][t]):106==n&&$(".show-image img").attr("src","images/"+e[5][t]),$(".show-image").mouseenter(function(){$(".filter").css("display","block"),$(".show-big-image").css("display","block"),101==n?$("#big-image").attr("src","images/"+e[0][t]):102==n?$("#big-image").attr("src","images/"+e[1][t]):103==n?$("#big-image").attr("src","images/"+e[2][t]):104==n?$("#big-image").attr("src","images/"+e[3][t]):105==n?$("#big-image").attr("src","images/"+e[4][t]):106==n&&$("#big-image").attr("src","images/"+e[5][t])}),$(".show-image").mouseleave(function(){$(".filter").css("display","none"),$(".show-big-image").css("display","none")}),$(".show-image").mousemove(function(i){var s=(i=i||event).pageX-$(".show-image").offset().left-$(".filter").width()/2,n=i.pageY-$(".show-image").offset().top-$(".filter").height()/2,a=$(".show-image").width()-$(".filter").width(),t=$(".show-image").height()-$(".filter").height();s<0?s=0:a<s&&(s=a),n<0?n=0:t<n&&(n=t),$(".filter").css({left:s,top:n});var e=s*$("#big-image").width()/$(".show-image").width(),l=n*$("#big-image").height()/$(".show-image").height();$("#big-image").css({left:-e,top:-l})})})}},{key:"addCart",value:function(){var r=this;this.banners.find(".car").click(function(){var i=$(this).parent().parent().find(".bid").html(),s=[{bid:i,count:1}],n=JSON.stringify(s);if(localStorage.getItem("shops")){for(var a=localStorage.getItem("shops"),t=JSON.parse(a),e=!1,l=0;l<t.length;l++)t[l].bid==i&&(t[l].count++,e=!0);if(!e){var o={bid:i,count:1};t.push(o)}var c=JSON.stringify(t);localStorage.setItem("shops",c)}else localStorage.setItem("shops",n);localStorage.getItem("shops"),r.getCartCount()})}},{key:"getCartCount",value:function(){if(localStorage.getItem("shops")){for(var i=localStorage.getItem("shops"),s=JSON.parse(i),n=0,a=0;a<s.length;a++)n+=s[a].count;this.cartShopsNum.html(n)}}}]),s}();